function getGoodInfo(){$.ajax({type:"post",url:"/Payment/getGoodInfo",data:{good_id:1},dataType:"json",success:function(a){a.msg&&alert(a.msg),a.success?setInfo(a.data):location.reload()}})}function setInfo(a){$(".payment-info").length>0&&($(".payment-info .setDate").html(a.set_s_use_date+" ~ "+a.set_e_use_date),$(".payment-info .org-amount").html(a.org_amount_str+"원"),$(".payment-info .good-amount").html(a.amount+"원"))}function serCashData(a){var n=$('form[name="upsertForm"]');"m"===a&&(n=$('form[name="upsertFormMobile"]')),"Y"===($vacct=$(".vacct")).find('input[name="cash_yn"]:checked').val()&&(n.find('input[name="cash_yn"]').val($vacct.find('input[name="cash_yn"]:checked').val()),n.find('input[name="cash_name"]').val($vacct.find('input[name="cash_name"]').val()),n.find('input[name="cash_ceo"]').val($vacct.find('input[name="cash_ceo"]').val()),n.find('input[name="cash_email"]').val($vacct.find('input[name="cash_email"]').val()),n.find('input[name="cash_address"]').val($vacct.find('input[name="cash_address"]').val()+" "+$vacct.find('input[name="cash_address_detail"]').val()+$vacct.find('input[name="cash_address_extra"]').val()),n.find('input[name="id_info"]').val($vacct.find('input[name="id_info_21"]').val()+"-"+$vacct.find('input[name="id_info_22"]').val()+"-"+$vacct.find('input[name="id_info_23"]').val()))}function pay_process_mobile(){var a=$('#upsertForm input[name="pay_method"]').val(),n=getPayMethodString(a);$("#upsertFormMobile").attr("action","/Payment/m_step1"),$('#upsertFormMobile input[name="buyr_name"]').val($('main input[name="buyr_name"]').val()),$('#upsertFormMobile input[name="buyr_mail"]').val($('main input[name="buyr_mail"]').val()),$('#upsertFormMobile input[name="buyr_tel2"]').val($('main input[name="cell_tel1"]').val()+"-"+$('main input[name="cell_tel2"]').val()+"-"+$('main input[name="cell_tel3"]').val()),$('#upsertFormMobile input[name="o_paymethod"]').val(n),serCashData("m"),$("#upsertFormMobile").submit()}function getPayMethodString(a){var n="card";return"001000000000"===a?n="vcnt":"000010000000"===a?n="phone":"000000000009"===a&&(n="fixed_vacc"),n}function pay_process_pc(){var a=$('#upsertForm input[name="pay_method"]').val();$("#upsertForm").attr("action","/Payment/process"),$('#upsertForm input[name="buyr_name"]').val($('main input[name="buyr_name"]').val()),$('#upsertForm input[name="buyr_mail"]').val($('main input[name="buyr_mail"]').val()),$('#upsertForm input[name="buyr_tel2"]').val($('main input[name="cell_tel1"]').val()+"-"+$('main input[name="cell_tel2"]').val()+"-"+$('main input[name="cell_tel3"]').val()),$('#upsertForm input[name="pay_method"]').val(a),$('#upsertForm input[name="o_paymethod"]').val(getPayMethodString(a)),serCashData("p"),"000000000009"===a?$("#upsertForm").submit():jsf__pay(document.upsertForm)}$(function(){let a=document.querySelectorAll('[data-bs-toggle="tooltip"]');[...a].map(a=>new bootstrap.Tooltip(a)),$(".searchAddr").on("click",function(){new daum.Postcode({oncomplete:function(a){var n="",e="";n="R"===a.userSelectedType?a.roadAddress:a.jibunAddress,"R"===a.userSelectedType&&(""!==a.bname&&/[동|로|가]$/g.test(a.bname)&&(e+=a.bname),""!==a.buildingName&&"Y"===a.apartment&&(e+=""!==e?", "+a.buildingName:a.buildingName),""!==e&&(e=" ("+e+")"),$('input[name="cash_address_extra"]').val(e)),$('input[name="cash_address"]').val(n),$('input[name="cash_address_detail"]').focus()}}).open()}),$(".payment-method").on("click",function(a){a.preventDefault(),$(".payment-method").removeClass("active"),$(this).addClass("active");var n=$(this).data("method"),e=$(".vacct"),t=e.find('input[name="cash_yn"]:checked').val();if(e.find('input[name="cash_yn"][value="N"]').click().trigger("click"),e.addClass("d-none"),"001000000000"===n||"000000000009"===n){"N"===t&&e.find("input").each(function(){("text"===$(this).attr("type")||"email"===$(this).attr("type"))&&$(this).val("")}),e.removeClass("d-none"),e.find('input[name="cash_yn"][value="Y"]').click().trigger("click");var i=$(".vacct").offset().top-20;$(window).scrollTop(i)}$('#upsertForm input[name="pay_method"]').val(n)}),$('input[name="same_info"]').on("click",function(a){var n=$(".accordion-button");!1===$(this).prop("checked")&&!0===n.hasClass("collapsed")?(n.click(),$('input[name="buyr_name"]').val(""),$('input[name="cell_tel1"]').val(""),$('input[name="cell_tel2"]').val(""),$('input[name="cell_tel3"]').val(""),$('input[name="buyr_mail"]').val("")):!0===$(this).prop("checked")&&!1===n.hasClass("collapsed")&&(n.click(),$.ajax({url:"/myInfo",data:{_csrf:$('input[name="_csrf"]').val()},method:"post",dataType:"json",success:function(a){var n=a.data.cell_tel.split("-");$('input[name="buyr_name"]').val(a.data.username),$('input[name="cell_tel1"]').val(n[0]),$('input[name="cell_tel2"]').val(n[1]),$('input[name="cell_tel3"]').val(n[2]),$('input[name="buyr_mail"]').val(a.data.user_email)}}))}),$('input[name="cash_yn"]').on("click",function(){"Y"===$(this).val()?$(".onCash").removeClass("d-none").addClass("d-flex"):$(".onCash").addClass("d-none").removeClass("d-flex")}),$(".complete").on("click",function(a){if(a.preventDefault(),!1==$("#agree1_yn").prop("checked"))return alert("약관에 동의해주세요!"),$(window).scrollTop(0),!1;var n=$(".vacct");if("Y"===n.find('input[name="cash_yn"]:checked').val()){if(""===n.find('input[name="cash_name"]').val())return alert("상호명을 입력해주세요"),n.find('input[name="cash_name"]').focus(),!1;if(""===n.find('input[name="cash_ceo"]').val())return alert("대표자명을 입력해주세요"),n.find('input[name="cash_ceo"]').focus(),!1;if(!1===isEmail($('input[name="cash_email"]').val()))return alert("이메일을 확인해주세요"),$('.vacct input[name="cash_email"]').focus(),!1;if(""===n.find('input[name="cash_address"]').val()||""===n.find('input[name="cash_address_detail"]').val())return alert("주소를 확인해주세요"),!1;if(!1===isCorporateRegiNo(n.find('input[name="id_info_21"]').val()+n.find('input[name="id_info_22"]').val()+n.find('input[name="id_info_23"]').val()))return alert("사업자 번호를 확인해주세요"),n.find('input[name="id_info_21"]').focus(),!1}check_mobile()?pay_process_mobile():pay_process_pc()}),getGoodInfo(),$('input[name="months"]').on("change",getGoodInfo)});